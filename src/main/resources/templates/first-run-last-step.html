<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: template (~{::head}, ~{::body}, ~{::scripts})}">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥</title>
</head>
<body>
<div class="container mt-3">
    <!-- –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã -->
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –≤ –º–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ üôè</h1>
            <div class="card">
                <div class="card-body">
                    <p>–¢–µ–ø–µ—Ä—å —Ç—ã –≥–æ—Ç–æ–≤–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å —Å–≤–æ–π –ø—É—Ç—å –∫ –Ω–æ–≤—ã–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º.</p>
                    <p>–í–ø–µ—Ä–µ–¥, –∫ –Ω–æ–≤–æ–º—É –æ–ø—ã—Ç—É! üöÄ</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mt-3">
            <div class="alert alert-warning" role="alert">
                <h4 class="alert-heading">–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</h4>
                <small>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è—è—Å—å –∫ –º–æ–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É, —Ç—ã —Å–æ–≥–ª–∞—à–∞–µ—à—å—Å—è —Å–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –∏ –≤ –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω–∏.</small>
                <small>–î–∞–≤–∞–π –≤–º–µ—Å—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤!</small>
                <hr>
                <p class="mb-0">
                    <button class="btn btn-outline-secondary"
                            onclick="Telegram.WebApp.openLink('https://mitrohinayulya.ru/society-rules', { try_instant_view: true })">
                        –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
                    </button>
                </p>
            </div>
        </div>
        <div class="col-md-6">
            <div class="alert alert-info" role="alert">
                <h4 class="alert-heading">–í–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã?</h4>
                <small>–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏—è, —Ç–æ —Å–º–µ–ª–µ–µ –ø–∏—à–∏ –º–æ–µ–º—É –∑–∞–±–æ—Ç–ª–∏–≤–æ–º—É –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—Éüë©‚Äçüíº</small>
                <small>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ —Å–µ–±–µ –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã</small>
                <small>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∏—à–µ—Ç –ø–µ—Ä–≤—ã–º</small>
                <hr>
                <p class="mb-0">
                    <button class="btn btn-outline-primary"
                            onclick="Telegram.WebApp.openTelegramLink('https://t.me/fenomen_mitrohina_assistant'); return false;">
                        –ù–∞–ø–∏—Å–∞—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
                    </button>
                </p>
            </div>
        </div>
    </div>
</div>
</body>

<th:block th:fragment="scripts">
    <script th:inline="javascript">
        function finishFirstRun() {
            fetch('/api/first-run/complete', {
                method: 'POST'
            })
                .then(response => {
                    if (!response.ok) {
                        toastMessage.textContent = '‚ùå–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ' + JSON.stringify(response.body);
                        toast.show();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    toastMessage.textContent = '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error;
                    toast.show();
                });
        }
        
        Telegram.WebApp.MainButton.text = "–ü–µ—Ä–µ–π—Ç–∏ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ";
        Telegram.WebApp.MainButton.hasShineEffect = true;
        Telegram.WebApp.onEvent('mainButtonClicked', function () {
            finishFirstRun()
            Telegram.WebApp.openTelegramLink([[${@environment.getProperty('app.telegram.societyLink')}]]);
            window.location.href = "/"
        });
        Telegram.WebApp.MainButton.show();
        Telegram.WebApp.SecondaryButton.hide();
        Telegram.WebApp.BackButton.hide();
    </script>
</th:block>
</html>